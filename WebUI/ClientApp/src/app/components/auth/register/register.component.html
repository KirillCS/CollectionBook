<div class="p-md-5 p-3">
  <div class="card app__container--form">
    <h1>Регистрация</h1>
    <form [formGroup]="form" (submit)="submit()" (input)="formChanged()">
      <div class="line">
        <mat-form-field class="field" appearance="outline">
          <mat-label>Логин</mat-label>
          <input type="text" required pattern="^[a-zA-Z0-9-_.]*$" maxlength="256" autocomplete="off" matInput
            formControlName="login" [errorStateMatcher]="matcher">
          <mat-error *ngIf="login.errors">{{ loginErrorMessage }}</mat-error>
          <mat-error *ngIf="login.errors?.serverErrors">
            <div *ngFor="let error of login.errors?.serverErrors">{{ error }}</div>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="line">
        <mat-form-field class="field" appearance="outline">
          <mat-label>Электронная почта</mat-label>
          <input type="email" required autocomplete="off" matInput formControlName="email"
            [errorStateMatcher]="matcher">
          <mat-error *ngIf="email.errors">{{ emailErrorMessage }}</mat-error>
          <mat-error *ngIf="email.errors?.serverErrors">
            <div *ngFor="let error of email.errors?.serverErrors">{{ error }}</div>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="line">
        <mat-form-field class="field" appearance="outline">
          <mat-label>Пароль</mat-label>
          <input [type]="hidePassword ? 'password' : 'text'" required minlength="6"
            pattern="^(?=.*[a-z])(?=.*?[A-Z])(?=.*\d)([a-zA-Z\d]|.){6,}$" matInput formControlName="password"
            [errorStateMatcher]="matcher">
          <button type="button" tabindex="-1" mat-icon-button matSuffix (click)="hidePassword = !hidePassword">
            <mat-icon class="material-icons-round">{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-hint>Минимальная длина: 6</mat-hint>
          <mat-error *ngIf="password.errors">{{ passwordErrorMessage }}</mat-error>
          <mat-error *ngIf="password.errors?.serverErrors">
            <div *ngFor="let error of password.errors?.serverErrors">{{ error }}</div>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="line">
        <mat-form-field class="field" appearance="outline">
          <mat-label>Подтверждение пароля</mat-label>
          <input [type]="hidePasswordConfirmation ? 'password' : 'text'" required matInput
            formControlName="passwordConfirmation" [errorStateMatcher]="matcher">
          <button type="button" tabindex="-1" mat-icon-button matSuffix
            (click)="hidePasswordConfirmation = !hidePasswordConfirmation">
            <mat-icon class="material-icons-round">{{hidePasswordConfirmation ? 'visibility_off' : 'visibility'}}
            </mat-icon>
          </button>
          <mat-error *ngIf="passwordConfirmation.errors">{{ passwordConfirmationErrorMessage }}</mat-error>
          <mat-error *ngIf="passwordConfirmation.errors?.serverErrors">
            <div *ngFor="let error of passwordConfirmation.errors?.serverErrors">{{ error }}</div>
          </mat-error>
        </mat-form-field>
      </div>
      <mat-error *ngIf="unknownError">Что-то пошло не так...</mat-error>
      <div class="actions">
        <button class="w-100" type="submit" [disabled]="inProcess" mat-raised-button
          color="primary">Зарегистрироваться</button>
      </div>
    </form>
  </div>
</div>